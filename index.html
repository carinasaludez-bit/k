<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For You ‚ù§Ô∏è</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Georgia', serif; scroll-behavior:smooth; }
body { background: linear-gradient(180deg, #ffc1cc, #ffa3b1, #ffb6c1); color:#fff; overflow-x:hidden; position:relative; }

/* Sections */
section { height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; padding:40px; position:relative; }
h1 { font-size:60px; }
h2 { margin-top:20px; }

/* Scroll Button */
.scroll-btn { position:absolute; bottom:30px; padding:10px 25px; background:#ff4d6d; border:none; border-radius:20px; color:white; cursor:pointer; }

/* Typing */
#typedText { max-width:700px; font-size:20px; line-height:1.6; min-height:180px; }

/* Heart */
.heart { font-size:70px; animation:beat 1s infinite; margin:20px 0; }
@keyframes beat { 0%,100%{transform:scale(1);} 50%{transform:scale(1.2);} }

/* Buttons */
.buttons { margin-top:20px; position:relative; }
button { padding:15px 30px; font-size:18px; border:none; border-radius:30px; cursor:pointer; }
.yes { background:#ff4d6d; color:white; margin-right:10px; }
.no { background:#333; color:white; position:absolute; }

/* YES PAGE */
#yesPage { position:fixed; top:0; left:0; width:100%; height:100%; background:radial-gradient(circle,#ff6699,#ff3366); display:flex; flex-direction:column; justify-content:center; align-items:center; visibility:hidden; opacity:0; transition:0.5s; z-index:10; }
#yesPage.active { visibility:visible; opacity:1; }

/* Canvas */
canvas { position:fixed; top:0; left:0; pointer-events:none; z-index:5; }

/* Floating Hearts */
.floating-heart { position:absolute; font-size:20px; color:#ffb6c1; animation:floatUp linear infinite; opacity:0.8; pointer-events:none; }
@keyframes floatUp { 0%{transform:translateY(0) scale(1); opacity:0.8;} 100%{transform:translateY(-100vh) scale(1.5); opacity:0;} }
</style>
</head>
<body>

<!-- Background Music (Replace 'you-and-i.mp3' with your file path) -->
<audio id="bgMusic" loop preload="auto">
    <source src="you-and-i.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
</audio>

<canvas id="confetti"></canvas>

<!-- PAGE 1 -->
<section id="page1">
    <p>A message just for you</p>
    <h1>EMANUELE ‚ù§Ô∏è</h1>
    <button class="scroll-btn" onclick="scrollToPage('page2')">Scroll Down ‚Üì</button>
</section>

<!-- PAGE 2 -->
<section id="page2">
    <div id="typedText"></div>
    <button class="scroll-btn" onclick="scrollToPage('page3')">Scroll Down ‚Üì</button>
</section>

<!-- PAGE 3 -->
<section id="page3">
    <div class="heart">‚ù§Ô∏è</div>
    <h2>Will you be my Valentine?</h2>

    <div class="buttons">
        <button class="yes" id="yesBtn">YES üíï</button>
        <button class="no" id="noBtn">NO üò¢</button>
    </div>

    <button class="scroll-btn" onclick="scrollToPage('page1')">Back to Top ‚Üë</button>
</section>

<!-- YES SCREEN -->
<div id="yesPage">
    <h1>SHE SAID YES! üéâ</h1>
    <p>You made this the best Valentine‚Äôs Day ever üíñ</p>
</div>

<script>
/* Smooth Scroll */
function scrollToPage(id){
    document.getElementById(id).scrollIntoView({behavior:"smooth"});
}

/* Typing Effect with Pause on New Lines */
const text = `My dearest Emanuele,

There are things in this world that are hard to say ‚Äî
because they are deeply felt.

You are my favorite notification,
my peace,
my happiness.

And today I just want to ask...

Will you be mine? üíñ`;

let i = 0;
function typeWriter(){
    if(i < text.length){
        document.getElementById("typedText").innerHTML += text.charAt(i) === "\n" ? "<br>" : text.charAt(i);
        i++;
        setTimeout(typeWriter, text.charAt(i-1)==="\n"?500:35);
    }
}
typeWriter();

/* NO Button Movement */
const noBtn = document.getElementById("noBtn");
function moveNo(){
    const x = Math.random()*200 - 100;
    const y = Math.random()*150 - 75;
    noBtn.style.transform = `translate(${x}px, ${y}px)`;
}
noBtn.addEventListener("mouseover", moveNo);
noBtn.addEventListener("click", moveNo);
noBtn.addEventListener("touchstart", moveNo);

/* Confetti System */
const canvas = document.getElementById("confetti");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let particles = [];
let confettiRunning = false;
let confettiInterval;

function createConfetti(){
    particles = [];
    for(let i=0;i<150;i++){
        particles.push({
            x: Math.random()*canvas.width,
            y: Math.random()*canvas.height - canvas.height,
            size: Math.random()*6+4,
            speed: Math.random()*3+2,
            color: `hsl(${Math.random()*360}, 100%, 50%)`
        });
    }
}

function drawConfetti(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x,p.y,p.size,p.size);
        p.y += p.speed;
        if(p.y > canvas.height) p.y = -10;
    });
}

/* Floating Hearts */
function createFloatingHeart(){
    const heart = document.createElement("div");
    heart.className = "floating-heart";
    heart.innerText = "‚ù§Ô∏è";
    heart.style.left = Math.random()*window.innerWidth + "px";
    heart.style.animationDuration = (3 + Math.random()*3) + "s";
    document.body.appendChild(heart);
    setTimeout(()=> heart.remove(), 6000);
}
setInterval(createFloatingHeart, 500);

/* Cinematic Heart Explosion (Improved with Gravity and Fade) */
function createHeartExplosion(){
    const colors = ["#ff4d6d","#ff6699","#ff99aa","#ffb6c1","#ff80ab"];
    for(let i=0;i<100;i++){
        const heart = document.createElement("div");
        heart.className = "floating-heart";
        heart.innerText = "‚ù§Ô∏è";
        heart.style.left = (window.innerWidth/2) + "px";
        heart.style.top = (window.innerHeight/2) + "px";
        heart.style.fontSize = (10 + Math.random()*30) + "px";
        heart.style.color = colors[Math.floor(Math.random()*colors.length)];
        heart.style.transition = "transform 1.5s ease-out, opacity 1.5s ease-out";
        heart.style.zIndex = "15";
        document.body.appendChild(heart);

        const angle = Math.random()*2*Math.PI;
        const distance = 200 + Math.random()*400;
        const x = Math.cos(angle)*distance;
        const y = Math.sin(angle)*distance - 50; // Slight upward bias for gravity effect

        setTimeout(()=>{
            heart.style.transform = `translate(${x}px, ${y}px) rotate(${Math.random()*720}deg)`;
            heart.style.opacity = 0;
        },50);
        setTimeout(()=> heart.remove(), 2000); // Longer removal for smooth fade
    }
}

/* YES Button */
document.getElementById("yesBtn").addEventListener("click", function(){
    document.getElementById("yesPage").classList.add("active");
    if(!confettiRunning){
        confettiRunning = true;
        createConfetti();
        confettiInterval = setInterval(drawConfetti, 20);
    }
    createHeartExplosion();
    // Play music (fallback for autoplay block)
    const music = document.getElementById("bgMusic");
    music.play().catch(e => console.log("Autoplay blocked; music will play on next interaction."));
});

/* Resize Canvas */
window.addEventListener("resize", ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    if(confettiRunning){
        clearInterval(confettiInterval);
        createConfetti();
        confettiInterval = setInterval(drawConfetti, 20);
    }
});
</script>
</body>
</html>
